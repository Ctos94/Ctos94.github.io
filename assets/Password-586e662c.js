import{i as e,k as a,j as l,e as s,w as r,r as t,o as d,d as o,f as u,l as n,A as i,M as v}from"./index-70eb1b2b.js";import{S as m}from"./sm-89cf7c55.js";const p={__name:"Password",setup(p){const c=e(),f=a(null),w=a(!1),b=a({password:"",confirm:""});l((()=>{c.commit("update_sider_active","/user/password")}));const _=async()=>{const{valid:e}=await f.value.validate();e&&(w.value=!0,n.put({url:i.user.password,data:{password:m(b.value.confirm)}}).then((()=>{v.success("修改成功"),f.value.reset()})).finally((()=>{w.value=!1})))},y=e=>e.length<6||e.length>18?"长度6-18位":!!/(?!^(\d+|[a-zA-Z]+)$)^[a-zA-Z0-9]{6,}$/.test(e)||"必须是数字和字母",V=e=>e===b.value.password||"两次输入密码不一致!";return(e,a)=>{const l=t("v-text-field"),n=t("v-btn"),i=t("v-form"),v=t("v-container");return d(),s(v,null,{default:r((()=>[o(i,{ref_key:"formRef",ref:f,style:{width:"300px"},onSubmit:a[2]||(a[2]=u((()=>{}),["prevent"]))},{default:r((()=>[o(l,{modelValue:b.value.password,"onUpdate:modelValue":a[0]||(a[0]=e=>b.value.password=e),rules:[e.$validator.required,y],type:"password",variant:"underlined","validate-on":"blur",label:"新密码"},null,8,["modelValue","rules"]),o(l,{modelValue:b.value.confirm,"onUpdate:modelValue":a[1]||(a[1]=e=>b.value.confirm=e),rules:[e.$validator.required,V],type:"password",variant:"underlined","validate-on":"blur",label:"确认密码"},null,8,["modelValue","rules"]),o(n,{class:"mt-2",color:"blue-lighten-1",disabled:w.value,loading:w.value,onClick:_,text:"保存"},null,8,["disabled","loading"])])),_:1},512)])),_:1})}}};export{p as default};
