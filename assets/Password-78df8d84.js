import{_ as m,A as p,r as o,o as c,e as v,w as i,b as s,f as w}from"./index-d815b49d.js";import{S as _}from"./sm-e59efa34.js";const b={data(){return{loading:!1,form:{password:"",confirm:""}}},beforeMount(){this.$store.commit("update_sider_active","/user/password")},methods:{async save(){const{valid:e}=await this.$refs.form.validate();e&&(this.loading=!0,this.$request.put({url:p.user.password,data:{password:_(this.form.confirm)}}).then(()=>{this.$message.success("修改成功"),this.$refs.form.reset()}).finally(()=>{this.loading=!1}))},validatePwd(e){var r=/(?!^(\d+|[a-zA-Z]+)$)^[a-zA-Z0-9]{6,}$/;return e.length<6||e.length>18?"长度6-18位":r.test(e)?!0:"必须是数字和字母"},validatePwd2(e){return e!==this.form.password?"两次输入密码不一致!":!0}}};function g(e,r,h,x,t,l){const n=o("v-text-field"),d=o("v-btn"),u=o("v-form"),f=o("v-container");return c(),v(f,null,{default:i(()=>[s(u,{ref:"form",style:{width:"300px"},onSubmit:r[2]||(r[2]=w(()=>{},["prevent"]))},{default:i(()=>[s(n,{modelValue:t.form.password,"onUpdate:modelValue":r[0]||(r[0]=a=>t.form.password=a),rules:[e.$validator.required,l.validatePwd],type:"password",variant:"underlined","validate-on":"blur",label:"新密码"},null,8,["modelValue","rules"]),s(n,{modelValue:t.form.confirm,"onUpdate:modelValue":r[1]||(r[1]=a=>t.form.confirm=a),rules:[e.$validator.required,l.validatePwd2],type:"password",variant:"underlined","validate-on":"blur",label:"确认密码"},null,8,["modelValue","rules"]),s(d,{class:"mt-2",color:"blue-lighten-1",disabled:t.loading,loading:t.loading,onClick:l.save,text:"保存"},null,8,["disabled","loading","onClick"])]),_:1},512)]),_:1})}const P=m(b,[["render",g]]);export{P as default};
